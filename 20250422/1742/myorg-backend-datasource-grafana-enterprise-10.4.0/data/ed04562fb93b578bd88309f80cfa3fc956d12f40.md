# Test info

- Name: smoke: should render query editor
- Location: /home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/tests/queryEditor.spec.ts:3:5

# Error details

```
Error: locator.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for getByLabel('Show more items')
    - locator resolved to <button tabindex="0" aria-label="Show more items" class="css-1chuu9v-toolbar-button">â€¦</button>
  - attempting click action
    - waiting for element to be visible, enabled and stable
  - element was detached from the DOM, retrying

    at DashboardPage.addPanel (/home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/node_modules/@grafana/plugin-e2e/dist/models/pages/DashboardPage.js:105:57)
    at Object.panelEditPage (/home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/node_modules/@grafana/plugin-e2e/dist/fixtures/panelEditPage.js:4:26)
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#pageContent"
- link "Grafana":
  - /url: /
  - img "Grafana"
- img
- button "Search or jump to..."
- img
- text: ctrl+k
- button "New":
  - img
  - img
- button "Help":
  - img
- button "News":
  - img
- button "Profile":
  - img "User avatar"
- button "Open menu":
  - img
- navigation "Breadcrumbs":
  - list:
    - listitem:
      - link "Home":
        - /url: /
    - listitem:
      - link "Dashboards":
        - /url: /dashboards
    - listitem: New dashboard
- button "Save dashboard":
  - img
- button "Dashboard settings":
  - img
- button "Add":
  - text: Add
  - img
- 'button "Time range selected: Last 6 hours"':
  - img
  - text: Last 6 hours
  - img
- button "Zoom out time range":
  - img
- button "Refresh dashboard":
  - img
- button "Auto refresh turned off. Choose refresh time interval":
  - img
- button "Toggle top search bar":
  - img
- main:
  - region "Dashboard submenu"
  - heading "Start your new dashboard by adding a visualization" [level=1]
  - paragraph: Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets.
  - button "Add visualization":
    - img
    - text: Add visualization
  - heading "Add a library panel" [level=3]
  - paragraph: Add visualizations that are shared with other dashboards.
  - button "Add library panel":
    - img
    - text: Add library panel
  - heading "Import a dashboard" [level=3]
  - paragraph:
    - text: Import dashboard from file or
    - link "grafana.com":
      - /url: https://grafana.com/grafana/dashboards/
    - text: .
  - button "Import dashboard":
    - img
    - text: Import dashboard
```

# Test source

```ts
   1 | import { test, expect } from '@grafana/plugin-e2e';
   2 |
>  3 | test('smoke: should render query editor', async ({ panelEditPage, readProvisionedDataSource }) => {
     |     ^ Error: locator.click: Test timeout of 30000ms exceeded.
   4 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
   5 |   await panelEditPage.datasource.set(ds.name);
   6 |   await expect(panelEditPage.getQueryEditorRow('A').getByRole('textbox', { name: 'Query Text' })).toBeVisible();
   7 | });
   8 |
   9 | test('should trigger new query when Constant field is changed', async ({
  10 |   panelEditPage,
  11 |   readProvisionedDataSource,
  12 | }) => {
  13 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
  14 |   await panelEditPage.datasource.set(ds.name);
  15 |   await panelEditPage.getQueryEditorRow('A').getByRole('textbox', { name: 'Query Text' }).fill('test query');
  16 |   const queryReq = panelEditPage.waitForQueryDataRequest();
  17 |   await panelEditPage.getQueryEditorRow('A').getByRole('spinbutton').fill('10');
  18 |   await expect(await queryReq).toBeTruthy();
  19 | });
  20 |
  21 | test('data query should return values 10 and 20', async ({ panelEditPage, readProvisionedDataSource }) => {
  22 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
  23 |   await panelEditPage.datasource.set(ds.name);
  24 |   await panelEditPage.getQueryEditorRow('A').getByRole('textbox', { name: 'Query Text' }).fill('test query');
  25 |   await panelEditPage.setVisualization('Table');
  26 |   await expect(panelEditPage.refreshPanel()).toBeOK();
  27 |   await expect(panelEditPage.panel.data).toContainText(['10', '20']);
  28 | });
  29 |
```
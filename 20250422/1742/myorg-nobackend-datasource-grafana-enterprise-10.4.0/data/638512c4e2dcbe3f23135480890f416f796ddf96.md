# Test info

- Name: data query should return a value
- Location: /home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/tests/queryEditor.spec.ts:9:5

# Error details

```
Error: locator.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for getByLabel('Show more items')

    at DashboardPage.addPanel (/home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/node_modules/@grafana/plugin-e2e/dist/models/pages/DashboardPage.js:105:57)
    at Object.panelEditPage (/home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/node_modules/@grafana/plugin-e2e/dist/fixtures/panelEditPage.js:4:26)
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#pageContent"
- link "Grafana":
  - /url: /
  - img "Grafana"
- img
- button "Search or jump to..."
- img
- text: ctrl+k
- button "New":
  - img
  - img
- button "Help":
  - img
- button "News":
  - img
- button "Profile":
  - img "User avatar"
- button "Open menu":
  - img
- navigation "Breadcrumbs":
  - list:
    - listitem:
      - link "Home":
        - /url: /
    - listitem:
      - link "Dashboards":
        - /url: /dashboards
    - listitem: New dashboard
- button "Save dashboard":
  - img
- button "Dashboard settings":
  - img
- button "Add":
  - text: Add
  - img
- 'button "Time range selected: Last 6 hours"':
  - img
  - text: Last 6 hours
  - img
- button "Zoom out time range":
  - img
- button "Refresh dashboard":
  - img
- button "Auto refresh turned off. Choose refresh time interval":
  - img
- button "Toggle top search bar":
  - img
- main:
  - region "Dashboard submenu"
  - heading "Start your new dashboard by adding a visualization" [level=1]
  - paragraph: Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets.
  - button "Add visualization":
    - img
    - text: Add visualization
  - heading "Add a library panel" [level=3]
  - paragraph: Add visualizations that are shared with other dashboards.
  - button "Add library panel":
    - img
    - text: Add library panel
  - heading "Import a dashboard" [level=3]
  - paragraph:
    - text: Import dashboard from file or
    - link "grafana.com":
      - /url: https://grafana.com/grafana/dashboards/
    - text: .
  - button "Import dashboard":
    - img
    - text: Import dashboard
```

# Test source

```ts
   1 | import { test, expect } from '@grafana/plugin-e2e';
   2 |
   3 | test('smoke: should render query editor', async ({ panelEditPage, readProvisionedDataSource }) => {
   4 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
   5 |   await panelEditPage.datasource.set(ds.name);
   6 |   await expect(panelEditPage.getQueryEditorRow('A').getByRole('textbox', { name: 'Query Text' })).toBeVisible();
   7 | });
   8 |
>  9 | test('data query should return a value', async ({ panelEditPage, readProvisionedDataSource }) => {
     |     ^ Error: locator.click: Test timeout of 30000ms exceeded.
  10 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
  11 |   await panelEditPage.datasource.set(ds.name);
  12 |   await panelEditPage.setVisualization('Table');
  13 |   await panelEditPage.getQueryEditorRow('A').getByRole('textbox', { name: 'Query Text' }).fill('test query');
  14 |   await panelEditPage.getQueryEditorRow('A').getByRole('spinbutton').fill('10');
  15 |   await expect(panelEditPage.panel.fieldNames).toContainText(['Time', 'Value']);
  16 |   await expect(panelEditPage.panel.data).toContainText(['10']);
  17 | });
  18 |
```
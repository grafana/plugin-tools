# Test info

- Name: smoke: should render config editor
- Location: /home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/tests/configEditor.spec.ts:4:5

# Error details

```
Error: page.goto: Test timeout of 30000ms exceeded.
Call log:
  - navigating to "http://localhost:3000/datasources/edit/bejlpf0021nnke", waiting until "networkidle"

    at DataSourceConfigPage.navigate (/home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/node_modules/@grafana/plugin-e2e/dist/models/pages/GrafanaPage.js:15:25)
    at DataSourceConfigPage.goto (/home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/node_modules/@grafana/plugin-e2e/dist/models/pages/DataSourceConfigPage.js:17:18)
    at /home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/node_modules/@grafana/plugin-e2e/dist/fixtures/commands/createDataSourceConfigPage.js:13:32
    at /home/runner/work/plugin-tools/plugin-tools/myorg-nobackend-datasource/tests/configEditor.spec.ts:6:3
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#pageContent"
- banner:
  - button "Open menu":
    - img "Grafana"
  - navigation "Breadcrumbs":
    - list:
      - listitem:
        - link "Home":
          - /url: /
      - listitem:
        - link "Connections":
          - /url: /connections
      - listitem:
        - link "Data sources":
          - /url: /connections/datasources
      - listitem: myorg-nobackend-datasource-421d380d-feff-4d9d-886e-666990ae1527
  - button "Search or jump to..."
  - text: ctrl+k
  - button "New"
  - button "Help"
  - button "Enable kiosk mode"
  - button "Profile":
    - img "User avatar"
- main:
  - img "logo for myorg-nobackend-datasource-421d380d-feff-4d9d-886e-666990ae1527"
  - heading "myorg-nobackend-datasource-421d380d-feff-4d9d-886e-666990ae1527" [level=1]
  - text: Type No-Backend Alerting Not supported
  - link "Explore data":
    - /url: /explore?left=%7B%22datasource%22:%22myorg-nobackend-datasource-421d380d-feff-4d9d-886e-666990ae1527%22,%22context%22:%22explore%22%7D
  - link "Build a dashboard":
    - /url: dashboard/new-with-ds/bejlpf0021nnke
  - text: "Type: No-Backend"
  - tablist:
    - tab "Settings" [selected]
  - text: Name
  - img
  - textbox "Name": myorg-nobackend-datasource-421d380d-feff-4d9d-886e-666990ae1527
  - text: Default
  - switch "Default"
  - text: Path
  - img
  - textbox "Path"
  - text: API Key
  - img
  - textbox "API Key"
  - button "Delete"
  - button "Save & test"
```

# Test source

```ts
   1 | import { test, expect } from '@grafana/plugin-e2e';
   2 | import { MyDataSourceOptions, MySecureJsonData } from '../src/types';
   3 |
   4 | test('smoke: should render config editor', async ({ createDataSourceConfigPage, readProvisionedDataSource, page }) => {
   5 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
>  6 |   await createDataSourceConfigPage({ type: ds.type });
     |   ^ Error: page.goto: Test timeout of 30000ms exceeded.
   7 |   await expect(page.getByLabel('Path')).toBeVisible();
   8 | });
   9 |
  10 | test('"Save & test" should be successful when configuration is valid', async ({
  11 |   createDataSourceConfigPage,
  12 |   readProvisionedDataSource,
  13 |   selectors,
  14 |   page,
  15 | }) => {
  16 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
  17 |   const configPage = await createDataSourceConfigPage({ type: ds.type });
  18 |   const healthCheckPath = `${selectors.apis.DataSource.proxy(
  19 |     configPage.datasource.uid,
  20 |     configPage.datasource.id.toString()
  21 |   )}/health`;
  22 |   await page.route(healthCheckPath, async (route) => await route.fulfill({ status: 200, body: 'OK' }));
  23 |   await expect(configPage.saveAndTest({ path: healthCheckPath })).toBeOK();
  24 | });
  25 |
  26 | test('"Save & test" should display success alert box when config is valid', async ({
  27 |   createDataSourceConfigPage,
  28 |   readProvisionedDataSource,
  29 |   selectors,
  30 | }) => {
  31 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
  32 |   const configPage = await createDataSourceConfigPage({ type: ds.type });
  33 |   const healthCheckPath = `${selectors.apis.DataSource.proxy(
  34 |     configPage.datasource.uid,
  35 |     configPage.datasource.id.toString()
  36 |   )}/health`;
  37 |   await expect(configPage.saveAndTest({ path: healthCheckPath })).not.toBeOK();
  38 |   await expect(configPage).toHaveAlert('error');
  39 | });
  40 |
```
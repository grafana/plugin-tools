# Test info

- Name: "Save & test" should be successful when configuration is valid
- Location: /home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/tests/configEditor.spec.ts:9:5

# Error details

```
Error: page.goto: Test timeout of 30000ms exceeded.
Call log:
  - navigating to "http://localhost:3000/datasources/edit/fejl087objs3kd", waiting until "networkidle"

    at DataSourceConfigPage.navigate (/home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/node_modules/@grafana/plugin-e2e/dist/models/pages/GrafanaPage.js:15:25)
    at DataSourceConfigPage.goto (/home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/node_modules/@grafana/plugin-e2e/dist/models/pages/DataSourceConfigPage.js:17:18)
    at /home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/node_modules/@grafana/plugin-e2e/dist/fixtures/commands/createDataSourceConfigPage.js:13:32
    at /home/runner/work/plugin-tools/plugin-tools/myorg-backend-datasource/tests/configEditor.spec.ts:15:22
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#pageContent"
- banner:
  - button "Open menu":
    - img "Grafana"
  - navigation "Breadcrumbs":
    - list:
      - listitem:
        - link "Home":
          - /url: /
      - listitem:
        - link "Connections":
          - /url: /connections
      - listitem:
        - link "Data sources":
          - /url: /connections/datasources
      - listitem: myorg-backend-datasource-64769b34-a104-457c-9aa6-016999b86f8e
  - button "Search or jump to..."
  - text: ctrl+k
  - button "New"
  - button "Help"
  - button "Enable kiosk mode"
  - button "Profile":
    - img "User avatar"
- main:
  - img "logo for myorg-backend-datasource-64769b34-a104-457c-9aa6-016999b86f8e"
  - heading "myorg-backend-datasource-64769b34-a104-457c-9aa6-016999b86f8e" [level=1]
  - text: Type Backend Alerting Not supported
  - link "Explore data":
    - /url: /explore?left=%7B%22datasource%22:%22myorg-backend-datasource-64769b34-a104-457c-9aa6-016999b86f8e%22,%22context%22:%22explore%22%7D
  - link "Build a dashboard":
    - /url: dashboard/new-with-ds/fejl087objs3kd
  - text: "Type: Backend"
  - tablist:
    - tab "Settings" [selected]
  - text: Name
  - img
  - textbox "Name": myorg-backend-datasource-64769b34-a104-457c-9aa6-016999b86f8e
  - text: Default
  - switch "Default"
  - text: Path
  - img
  - textbox "Path"
  - text: API Key
  - img
  - textbox "API Key"
  - button "Delete"
  - button "Save & test"
```

# Test source

```ts
   1 | import { test, expect } from '@grafana/plugin-e2e';
   2 | import { MyDataSourceOptions, MySecureJsonData } from '../src/types';
   3 |
   4 | test('smoke: should render config editor', async ({ createDataSourceConfigPage, readProvisionedDataSource, page }) => {
   5 |   const ds = await readProvisionedDataSource({ fileName: 'datasources.yml' });
   6 |   await createDataSourceConfigPage({ type: ds.type });
   7 |   await expect(page.getByLabel('Path')).toBeVisible();
   8 | });
   9 | test('"Save & test" should be successful when configuration is valid', async ({
  10 |   createDataSourceConfigPage,
  11 |   readProvisionedDataSource,
  12 |   page,
  13 | }) => {
  14 |   const ds = await readProvisionedDataSource<MyDataSourceOptions, MySecureJsonData>({ fileName: 'datasources.yml' });
> 15 |   const configPage = await createDataSourceConfigPage({ type: ds.type });
     |                      ^ Error: page.goto: Test timeout of 30000ms exceeded.
  16 |   await page.getByRole('textbox', { name: 'Path' }).fill(ds.jsonData.path ?? '');
  17 |   await page.getByRole('textbox', { name: 'API Key' }).fill(ds.secureJsonData?.apiKey ?? '');
  18 |   await expect(configPage.saveAndTest()).toBeOK();
  19 | });
  20 |
  21 | test('"Save & test" should fail when configuration is invalid', async ({
  22 |   createDataSourceConfigPage,
  23 |   readProvisionedDataSource,
  24 |   page,
  25 | }) => {
  26 |   const ds = await readProvisionedDataSource<MyDataSourceOptions, MySecureJsonData>({ fileName: 'datasources.yml' });
  27 |   const configPage = await createDataSourceConfigPage({ type: ds.type });
  28 |   await page.getByRole('textbox', { name: 'Path' }).fill(ds.jsonData.path ?? '');
  29 |   await expect(configPage.saveAndTest()).not.toBeOK();
  30 |   await expect(configPage).toHaveAlert('error', { hasText: 'API key is missing' });
  31 | });
  32 |
```